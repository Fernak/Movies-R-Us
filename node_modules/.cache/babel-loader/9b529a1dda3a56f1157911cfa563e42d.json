{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tiffa\\\\CPSC471\\\\Movies-R-Us\\\\src\\\\components\\\\forms\\\\AddServiceForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button } from 'react-bootstrap';\nimport styled from 'styled-components';\nimport { Form, Select } from 'semantic-ui-react';\nexport default function AddServiceForm(props) {\n  _s();\n\n  var Email = props.userEmail;\n  var allServices = props.allServices;\n  var userServices = props.userServices;\n  var selectOptions = [];\n  const [service, setService] = useState('');\n  /* Generating the list of services the user can add. \r\n     References: \r\n      * Checking if an a certain value is within in any of the objects in the array list \r\n          * https://www.tutorialrepublic.com/faq/how-to-check-if-an-array-includes-an-object-in-javascript.php */\n\n  for (var i = 0; i < allServices.length; i++) {\n    if (!userServices.some(userServices => userServices.Service_name === allServices[i]['Service_name'])) {\n      var newObj = {\n        key: allServices[i]['Sid'],\n        text: allServices[i]['Service_name'],\n        value: allServices[i]['Sid']\n      };\n      selectOptions.push(newObj);\n    }\n  }\n\n  function closeReview() {\n    props.setTrigger(false);\n    setService('');\n  }\n\n  var serviceAdded = allServices.find(object => object.Service_name == service);\n  console.log(serviceAdded);\n  /*\r\n   * Creating request object and getting reponse from API after adding a user review to a certain movie \r\n   * Flask Movie API Example: https://www.youtube.com/watch?v=Urx8Kj00zsI\r\n   */\n\n  async function addService() {\n    console.log(service);\n\n    if (service == '') {\n      alert('Error! Please select a service from the list');\n    } else {\n      const request = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          Email: Email,\n          Service_name: service\n        })\n      };\n      const response = await fetch('/usersubscriptions', request);\n\n      if (response.ok) {\n        console.log('Service added');\n        var serviceAdded = allServices.find(object => object.Service_name == service);\n        props.onAddedService(serviceAdded);\n        selectOptions.filter(selectOptions => selectOptions.Id != service);\n        props.setTrigger(false);\n        setService('');\n      } else {\n        console.log('Not successful');\n      }\n    }\n  }\n  /*References: \r\n      * Creating a add review popup form where users can add a review: \r\n          * Build a POPUP component in React JS ~ A Beginner Tutorial with React https://www.youtube.com/watch?v=i8fAO_zyFAM */\n\n\n  return props.trigger ? /*#__PURE__*/React.createElement(Popup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ServiceForm, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Top, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, \"Add a service\"), /*#__PURE__*/React.createElement(CloseBtn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"default\",\n    style: {\n      background: \"#9FFFCB\"\n    },\n    onClick: closeReview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 35\n    }\n  }, \"X\"))), /*#__PURE__*/React.createElement(Select, {\n    style: {\n      marginLeft: \"20px\",\n      width: \"250px\"\n    },\n    options: selectOptions,\n    placeholder: \"Select Service\",\n    onChange: event => setService(event.target.textContent),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(SubmitBtn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"default\",\n    style: {\n      background: \"#9FFFCB\"\n    },\n    onClick: addService,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 32\n    }\n  }, \"Add\"))), props.children)) : \"\";\n}\n\n_s(AddServiceForm, \"tQFGLCUfh50GjHdj8avZWh6janQ=\");\n\n_c = AddServiceForm;\n;\nconst Popup = styled.div`\n    display: flex; \n    justify-content: center; \n    align-items: center; \n    position: fixed; \n    top: 0; \n    left: 0; \n    width: 100%; \n    height: 100vh;  \n    background-color: rgba(0, 0, 0, 0.2);\n`;\n_c2 = Popup;\nconst ReviewForm = styled.div`\n    position: relative; \n    width: 400px; \n    padding: 10px;  \n    background-color: white; \n    border-radius: 10px;\n`;\nconst Top = styled.div`\n    display: flex;  \n    margin-bottom: 0px; \n`;\n_c3 = Top;\nconst CloseBtn = styled.div`\n    margin-top: 0px; \n    margin-bottom: 10px;  \n    margin-left: 200px;   \n`;\n_c4 = CloseBtn;\nconst SubmitBtn = styled.div`\n    margin-top = 10px;  \n    margin-left: 320px;\n`;\n_c5 = SubmitBtn;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"AddServiceForm\");\n$RefreshReg$(_c2, \"Popup\");\n$RefreshReg$(_c3, \"Top\");\n$RefreshReg$(_c4, \"CloseBtn\");\n$RefreshReg$(_c5, \"SubmitBtn\");","map":{"version":3,"sources":["C:/Users/Tiffa/CPSC471/Movies-R-Us/src/components/forms/AddServiceForm.js"],"names":["React","useState","useEffect","Button","styled","Form","Select","AddServiceForm","props","Email","userEmail","allServices","userServices","selectOptions","service","setService","i","length","some","Service_name","newObj","key","text","value","push","closeReview","setTrigger","serviceAdded","find","object","console","log","addService","alert","request","method","headers","body","JSON","stringify","response","fetch","ok","onAddedService","filter","Id","trigger","background","marginLeft","width","event","target","textContent","children","Popup","div","ReviewForm","Top","CloseBtn","SubmitBtn"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,MAAR,QAAqB,iBAArB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAAQC,IAAR,EAAcC,MAAd,QAA2B,mBAA3B;AAEA,eAAe,SAASC,cAAT,CAAwBC,KAAxB,EAA8B;AAAA;;AACzC,MAAIC,KAAK,GAAGD,KAAK,CAACE,SAAlB;AACA,MAAIC,WAAW,GAAGH,KAAK,CAACG,WAAxB;AACA,MAAIC,YAAY,GAAGJ,KAAK,CAACI,YAAzB;AACA,MAAIC,aAAa,GAAG,EAApB;AAEA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;AAEA;AACJ;AACA;AACA;;AACI,OAAK,IAAIe,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACL,WAAW,CAACM,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACpC,QAAI,CAAEJ,YAAY,CAACM,IAAb,CAAkBN,YAAY,IAAIA,YAAY,CAACO,YAAb,KAA8BR,WAAW,CAACK,CAAD,CAAX,CAAe,cAAf,CAAhE,CAAN,EAAuG;AACnG,UAAII,MAAM,GAAG;AAACC,QAAAA,GAAG,EAAEV,WAAW,CAACK,CAAD,CAAX,CAAe,KAAf,CAAN;AAA6BM,QAAAA,IAAI,EAAEX,WAAW,CAACK,CAAD,CAAX,CAAe,cAAf,CAAnC;AAAmEO,QAAAA,KAAK,EAAEZ,WAAW,CAACK,CAAD,CAAX,CAAe,KAAf;AAA1E,OAAb;AACAH,MAAAA,aAAa,CAACW,IAAd,CAAmBJ,MAAnB;AACH;AACJ;;AAED,WAASK,WAAT,GAAsB;AAClBjB,IAAAA,KAAK,CAACkB,UAAN,CAAiB,KAAjB;AACAX,IAAAA,UAAU,CAAC,EAAD,CAAV;AACH;;AACD,MAAIY,YAAY,GAAGhB,WAAW,CAACiB,IAAZ,CAAiBC,MAAM,IAAIA,MAAM,CAACV,YAAP,IAAuBL,OAAlD,CAAnB;AACAgB,EAAAA,OAAO,CAACC,GAAR,CAAYJ,YAAZ;AACA;AACJ;AACA;AACA;;AACI,iBAAeK,UAAf,GAA2B;AACvBF,IAAAA,OAAO,CAACC,GAAR,CAAYjB,OAAZ;;AAEA,QAAIA,OAAO,IAAI,EAAf,EAAkB;AACdmB,MAAAA,KAAK,CAAC,8CAAD,CAAL;AACH,KAFD,MAGI;AACA,YAAMC,OAAO,GAAG;AACZC,QAAAA,MAAM,EAAE,MADI;AAEZC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFG;AAGZC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAE9B,UAAAA,KAAK,EAAEA,KAAT;AAAgBU,UAAAA,YAAY,EAAEL;AAA9B,SAAf;AAHM,OAAhB;AAKA,YAAM0B,QAAQ,GAAG,MAAMC,KAAK,CAAC,oBAAD,EAAuBP,OAAvB,CAA5B;;AACA,UAAIM,QAAQ,CAACE,EAAb,EAAgB;AACZZ,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,YAAIJ,YAAY,GAAGhB,WAAW,CAACiB,IAAZ,CAAiBC,MAAM,IAAIA,MAAM,CAACV,YAAP,IAAuBL,OAAlD,CAAnB;AACAN,QAAAA,KAAK,CAACmC,cAAN,CAAqBhB,YAArB;AACAd,QAAAA,aAAa,CAAC+B,MAAd,CAAqB/B,aAAa,IAAEA,aAAa,CAACgC,EAAd,IAAkB/B,OAAtD;AACAN,QAAAA,KAAK,CAACkB,UAAN,CAAiB,KAAjB;AACAX,QAAAA,UAAU,CAAC,EAAD,CAAV;AACH,OAPD,MAOM;AACFe,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AACJ;AACJ;AACD;AACJ;AACA;;;AACI,SAAQvB,KAAK,CAACsC,OAAP,gBACH,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAU,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAAyB,IAAA,KAAK,EAAE;AAACC,MAAAA,UAAU,EAAE;AAAb,KAAhC;AAAyD,IAAA,OAAO,EAAEtB,WAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAV,CAFJ,CADJ,eAKI,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAE;AAACuB,MAAAA,UAAU,EAAE,MAAb;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KAAf;AAAqD,IAAA,OAAO,EAAEpC,aAA9D;AAA6E,IAAA,WAAW,EAAC,gBAAzF;AAA0G,IAAA,QAAQ,EAAEqC,KAAK,IAAInC,UAAU,CAACmC,KAAK,CAACC,MAAN,CAAaC,WAAd,CAAvI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,eAMI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAW,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAAyB,IAAA,KAAK,EAAE;AAACL,MAAAA,UAAU,EAAE;AAAb,KAAhC;AAA0D,IAAA,OAAO,EAAEf,UAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAX,CANJ,CADJ,EASKxB,KAAK,CAAC6C,QATX,CADJ,CADG,GAcH,EAdJ;AAeH;;GAxEuB9C,c;;KAAAA,c;AAwEvB;AAED,MAAM+C,KAAK,GAAGlD,MAAM,CAACmD,GAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;MAAMD,K;AAYN,MAAME,UAAU,GAAGpD,MAAM,CAACmD,GAAK;AAC/B;AACA;AACA;AACA;AACA;AACA,CANA;AAQA,MAAME,GAAG,GAAGrD,MAAM,CAACmD,GAAI;AACvB;AACA;AACA,CAHA;MAAME,G;AAKN,MAAMC,QAAQ,GAAGtD,MAAM,CAACmD,GAAI;AAC5B;AACA;AACA;AACA,CAJA;MAAMG,Q;AAKN,MAAMC,SAAS,GAAGvD,MAAM,CAACmD,GAAI;AAC7B;AACA;AACA,CAHA;MAAMI,S","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {Button} from 'react-bootstrap'\r\nimport styled from 'styled-components'\r\nimport {Form, Select} from 'semantic-ui-react'\r\n\r\nexport default function AddServiceForm(props){\r\n    var Email = props.userEmail\r\n    var allServices = props.allServices\r\n    var userServices = props.userServices\r\n    var selectOptions = []\r\n\r\n    const [service, setService] = useState('')\r\n\r\n    /* Generating the list of services the user can add. \r\n       References: \r\n        * Checking if an a certain value is within in any of the objects in the array list \r\n            * https://www.tutorialrepublic.com/faq/how-to-check-if-an-array-includes-an-object-in-javascript.php */\r\n    for (var i=0; i<allServices.length; i++){\r\n        if (!(userServices.some(userServices => userServices.Service_name === allServices[i]['Service_name']))){\r\n            var newObj = {key: allServices[i]['Sid'], text: allServices[i]['Service_name'], value: allServices[i]['Sid']}\r\n            selectOptions.push(newObj)\r\n        }\r\n    }\r\n\r\n    function closeReview(){\r\n        props.setTrigger(false)\r\n        setService('')\r\n    }\r\n    var serviceAdded = allServices.find(object => object.Service_name == service)\r\n    console.log(serviceAdded)\r\n    /*\r\n     * Creating request object and getting reponse from API after adding a user review to a certain movie \r\n     * Flask Movie API Example: https://www.youtube.com/watch?v=Urx8Kj00zsI\r\n     */\r\n    async function addService(){\r\n        console.log(service)\r\n        \r\n        if (service == ''){\r\n            alert('Error! Please select a service from the list')\r\n        } \r\n        else{\r\n            const request = {\r\n                method: 'POST', \r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ Email: Email, Service_name: service})\r\n            }\r\n            const response = await fetch('/usersubscriptions', request); \r\n            if (response.ok){\r\n                console.log('Service added')\r\n                var serviceAdded = allServices.find(object => object.Service_name == service)\r\n                props.onAddedService(serviceAdded)\r\n                selectOptions.filter(selectOptions=>selectOptions.Id!=service)\r\n                props.setTrigger(false)\r\n                setService('')  \r\n            } else{\r\n                console.log('Not successful')\r\n            }\r\n        }    \r\n    }\r\n    /*References: \r\n        * Creating a add review popup form where users can add a review: \r\n            * Build a POPUP component in React JS ~ A Beginner Tutorial with React https://www.youtube.com/watch?v=i8fAO_zyFAM */\r\n    return (props.trigger)?(\r\n        <Popup>\r\n            <ServiceForm>\r\n                <Form>\r\n                    <Top>\r\n                        <h2>Add a service</h2>\r\n                        <CloseBtn><Button variant=\"default\"style={{background: \"#9FFFCB\"}} onClick={closeReview}>X</Button></CloseBtn>\r\n                    </Top>\r\n                    <Select style={{marginLeft: \"20px\", width: \"250px\"}} options={selectOptions} placeholder='Select Service' onChange={event => setService(event.target.textContent)}/>\r\n                    <SubmitBtn><Button variant=\"default\"style={{background: \"#9FFFCB\" }} onClick={addService}>Add</Button></SubmitBtn>\r\n                </Form>\r\n                {props.children}    \r\n            </ServiceForm>             \r\n        </Popup>\r\n    ) : \"\"; \r\n}; \r\n\r\nconst Popup = styled.div `\r\n    display: flex; \r\n    justify-content: center; \r\n    align-items: center; \r\n    position: fixed; \r\n    top: 0; \r\n    left: 0; \r\n    width: 100%; \r\n    height: 100vh;  \r\n    background-color: rgba(0, 0, 0, 0.2);\r\n`\r\n\r\nconst ReviewForm = styled.div `\r\n    position: relative; \r\n    width: 400px; \r\n    padding: 10px;  \r\n    background-color: white; \r\n    border-radius: 10px;\r\n`\r\n\r\nconst Top = styled.div`\r\n    display: flex;  \r\n    margin-bottom: 0px; \r\n`\r\n\r\nconst CloseBtn = styled.div`\r\n    margin-top: 0px; \r\n    margin-bottom: 10px;  \r\n    margin-left: 200px;   \r\n`\r\nconst SubmitBtn = styled.div`\r\n    margin-top = 10px;  \r\n    margin-left: 320px;\r\n`"]},"metadata":{},"sourceType":"module"}